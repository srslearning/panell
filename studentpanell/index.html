<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="file/images/srs.ico" type="image/x-icon">
  <title>پنل کاربر</title>
  <style>
    /* کل صفحه */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(135deg, #ffffff, #a0c4ff); /* سفید-آبی روشن */
      display: flex;
      justify-content: center;
      align-items: center;
      color: #333;
      overflow: hidden;
    }

    /* آیفریم */
    iframe {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      opacity: 0; /* ابتدا پنهان */
      transition: opacity 0.5s ease; /* fade in */
    }

    /* لودر */
    #loader {
      text-align: center;
      padding: 20px;
      max-width: 90%;
      transition: opacity 0.5s ease; /* fade out */
      z-index: 10;
      position: absolute;
    }

    /* لوگو چرخان */
    #loader .spinner-logo {
      width: 60px;   
      height: 60px;
      animation: spin 1s linear infinite;
      display: block;
      margin: 0 auto 15px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    #loader p {
      font-size: 1.2rem;
      margin: 0;
      word-wrap: break-word;
    }

    /* واکنش‌گرایی متن و لوگو روی موبایل */
    @media (max-width: 480px) {
      #loader .spinner-logo {
        width: 40px;
        height: 40px;
      }
      #loader p {
        font-size: 1rem;
      }
    }

    /* وقتی لودر مخفی شد */
    #loader.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* آیفریم نمایان شد */
    #mainFrame.visible {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="loader">
    <img src="file/images/srs.ico" alt="لوگو" class="spinner-logo" />
    <p>درحال بارگذاری لطفا کمی صبر کنید</p>
  </div>

  <iframe id="mainFrame" allowfullscreen></iframe>

  <script>
    const GAS_DEPLOY_URL = "https://script.google.com/macros/s/AKfycbyHRIT__0coEhBWl9UFVxozxEVoXFpZxYHwVddGxslNNmSmdVKn6bsC1bjz6iNyV9_PAA/exec";

    function initIframe() {
      const iframe = document.getElementById("mainFrame");
      const loader = document.getElementById("loader");

      const iframeURL = GAS_DEPLOY_URL + "?proxy=1";
      iframe.src = iframeURL;

      // وقتی آیفریم کامل لود شد، لودر محو شود و آیفریم ظاهر شود
      iframe.addEventListener("load", () => {
        loader.classList.add("hidden");      // fade out لودر
        iframe.classList.add("visible");     // fade in آیفریم
      });
    }

    window.addEventListener("DOMContentLoaded", initIframe);
  </script>
</body>
</html>
